{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
<!-- Search Section -->
<div class="container mb-4">
    <div class="search-box">
        <div class="input-group">
            <input type="text" id="searchQuery" class="form-control form-control-lg" placeholder="Search for products...">
            <button class="btn btn-primary btn-lg btn-search" onclick="searchProducts()">
                <i class="fas fa-search"></i> Search
            </button>
        </div>
    </div>
</div>

<!-- Platforms Banner -->
<section class="platforms-banner">
    <div class="container">
        <h2 class="text-center mb-4">
            <i class="fas fa-chart-line me-2"></i>
            Tracking Prices Across Leading E-commerce Platforms
        </h2>
        <div class="row justify-content-center">
            <div class="col-md-5">
                <div class="platform-card jumia">
                    <img src="{{ url_for('static', filename='media/jumia-logo.png') }}" alt="Jumia" class="platform-logo">
                    <div class="platform-stats">
                        <div class="stat-number" id="jumiaProducts">-</div>
                        <div>Products Tracked</div>
                        <div class="platform-prices" id="jumiaPrices">- prices tracked</div>
                    </div>
                </div>
            </div>
            <div class="col-md-5">
                <div class="platform-card kilimall">
                    <img src="{{ url_for('static', filename='media/kilimall-logo.png') }}" alt="Kilimall" class="platform-logo">
                    <div class="platform-stats">
                        <div class="stat-number" id="kilimallProducts">-</div>
                        <div>Products Tracked</div>
                        <div class="platform-prices" id="kilimallPrices">- prices tracked</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Stats Cards -->
<div class="container">
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card stats-card mb-3">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="fas fa-box me-2"></i>
                        Total Products
                    </h5>
                    <h2 id="totalProducts">-</h2>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card stats-card mb-3">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="fas fa-arrow-down me-2"></i>
                        Price Drops Today
                    </h5>
                    <h2 id="priceDrops">-</h2>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card stats-card mb-3">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="fas fa-arrow-up me-2"></i>
                        Price Increases Today
                    </h5>
                    <h2 id="priceIncreases">-</h2>
                </div>
            </div>
        </div>
    </div>

    <!-- Filters -->
    <div class="row mb-4">
        <div class="col-md-6">
            <select id="categoryFilter" class="form-select">
                <option value="">All Categories</option>
            </select>
        </div>
        <div class="col-md-6">
            <select id="platformFilter" class="form-select">
                <option value="">All Platforms</option>
            </select>
        </div>
    </div>

    <!-- Products List and Price History -->
    <div class="row">
        <div class="col-md-8">
            <div id="productsList" class="row g-4"></div>
            <div class="text-center mt-4">
                <button id="loadMore" class="btn btn-primary btn-lg">Load More Products</button>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card sticky-top" style="top: 20px">
                <div class="card-body">
                    <h5 class="card-title mb-3">Price History</h5>
                    <canvas id="priceChart"></canvas>
                    <div id="productDetails" class="mt-3"></div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}